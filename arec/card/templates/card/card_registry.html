{% extends 'html/base.html' %}
{% load static %}
{% block content %}

<form method="POST" href="{% url 'card_registry' %}" enctype="multipart/form-data">
  {% csrf_token %}
  <table class="table table-striped table-hover table-bordered mt-3">
  <thead>
    <tr>
      <th>
          <label class="">
              <input type="checkbox" id="selectall" name="selectall" autocomplete="off" onclick="eventCheckBox()">
              <span class="glyphicon glyphicon-ok"></span>
          </label>
      </th>
      <th>№</th>
      <th>Дата</th>
      <th>Время</th>
      <th>Категория</th>
      <th>Район</th>
      <th>Адрес </th>
      <th>Оператор</th>
      <th>Статус</th>
    </tr>
  </thead>
  <tbody>

  {% for bid in cards %}
    <tr>
      <td>
        <div class="form-group rowauto" data-toggle="buttons">
              <label class="checkbox">
                  <input class="approval-card" type="checkbox" id="bid_{{ bid.id }}" name="bids[]" value="{{ bid.id }}" autocomplete="off">
                  <span class="glyphicon glyphicon-ok"></span>
              </label>
        </div>
      </td>
      <td>&nbsp;<span style="color:black; font-weight: bold"><a href="{% url 'card_detail' cid=bid.id %}">{{ bid.id }}</a></span></td>
      <td>{{ bid.created_at | date:"d.m.y" }}</td>
      <td>{{ bid.created_at | date:"H:i" }}</td>
      <td>{{ bid.get_object_category_display }}</td>
      <td>{{ bid.get_district_display }}</td>
      <td>{{ bid.street }}, д. {{ bid.bldg }} - {{ bid.apt_num }}</td>
      <td>{{ bid.operator }}</td>
      <td>На рассмотрении</td>
    </tr>
  {% endfor %}

  </tbody>
  </table>
  <button type="submit" class="btn btn-primary">Согласовать выделенные</button>
</form>
<script>
function eventCheckBox() {
    const cardsToApprove = Array.from(document.getElementsByClassName("approval-card"));
    cardsToApprove.forEach((item) => item.checked = !item.checked);
}
</script>
{% endblock content %}