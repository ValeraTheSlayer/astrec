version: "3.8"

services:
  web_project_arec:
    build: .
    image: app
    # command: python manage.py runserver 0.0.0.0:8888
    volumes:
      - .:/code
    entrypoint:
      - ./entrypoint.sh
    ports:
      - "8000:8000"

  postgres:
    image: postgres:latest
    env_file: ./arec/environments/dev.env
    volumes:
      - ./postgres_backups:/var/postgres_backups
    ports:
      - "5432:5432"

  nginx:
      restart: always
      build:
          context: ./nginx
      ports:
      - "80:80"
      volumes:
        - ./files:/code/files
        - ./arec/static:/code/arec/static
